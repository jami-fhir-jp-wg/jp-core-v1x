"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.FshQuantity = void 0;
const FshEntity_1 = require("./FshEntity");
const common_1 = require("./common");
class FshQuantity extends FshEntity_1.FshEntity {
    constructor(value, unit) {
        super();
        this.value = value;
        this.unit = unit;
    }
    toString() {
        var _a, _b;
        const stringParts = [];
        if (this.value != null) {
            stringParts.push(this.value.toString());
        }
        if (((_a = this.unit) === null || _a === void 0 ? void 0 : _a.code) != null) {
            if (((_b = this.unit) === null || _b === void 0 ? void 0 : _b.system) == 'http://unitsofmeasure.org') {
                stringParts.push(`'${this.unit.code}'`);
                if (this.unit.display) {
                    stringParts.push(`"${(0, common_1.fshifyString)(this.unit.display)}"`);
                }
            }
            else {
                stringParts.push(`${this.unit.toString()}`);
            }
        }
        return stringParts.join(' ');
    }
    toFHIRQuantity() {
        var _a, _b, _c;
        const quantity = {};
        if (this.value != null) {
            quantity.value = this.value;
        }
        if ((_a = this.unit) === null || _a === void 0 ? void 0 : _a.code) {
            quantity.code = this.unit.code;
        }
        if ((_b = this.unit) === null || _b === void 0 ? void 0 : _b.system) {
            quantity.system = this.unit.system;
        }
        if ((_c = this.unit) === null || _c === void 0 ? void 0 : _c.display) {
            quantity.unit = this.unit.display;
        }
        return quantity;
    }
    equals(other) {
        var _a, _b, _c, _d, _e, _f;
        return (this.value === other.value &&
            ((_a = this.unit) === null || _a === void 0 ? void 0 : _a.code) === ((_b = other.unit) === null || _b === void 0 ? void 0 : _b.code) &&
            ((_c = this.unit) === null || _c === void 0 ? void 0 : _c.system) === ((_d = other.unit) === null || _d === void 0 ? void 0 : _d.system) &&
            ((_e = this.unit) === null || _e === void 0 ? void 0 : _e.display) === ((_f = other.unit) === null || _f === void 0 ? void 0 : _f.display));
    }
}
exports.FshQuantity = FshQuantity;
//# sourceMappingURL=FshQuantity.js.map