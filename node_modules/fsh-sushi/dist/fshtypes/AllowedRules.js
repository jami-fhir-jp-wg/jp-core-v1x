"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.isAllowedRule = isAllowedRule;
const rules_1 = require("./rules");
const allowedRulesMap = new Map([
    [
        'Profile',
        [
            rules_1.CardRule,
            rules_1.CaretValueRule,
            rules_1.ContainsRule,
            rules_1.AssignmentRule,
            rules_1.FlagRule,
            rules_1.ObeysRule,
            rules_1.OnlyRule,
            rules_1.BindingRule
        ]
    ],
    [
        'Extension',
        [
            rules_1.CardRule,
            rules_1.CaretValueRule,
            rules_1.ContainsRule,
            rules_1.AssignmentRule,
            rules_1.FlagRule,
            rules_1.ObeysRule,
            rules_1.OnlyRule,
            rules_1.BindingRule
        ]
    ],
    ['Instance', [rules_1.AssignmentRule, rules_1.PathRule]],
    ['FshValueSet', [rules_1.ValueSetComponentRule, rules_1.CaretValueRule]],
    ['FshCodeSystem', [rules_1.ConceptRule, rules_1.CaretValueRule]],
    ['Invariant', [rules_1.AssignmentRule]],
    ['Mapping', [rules_1.MappingRule]],
    [
        'RuleSet',
        [
            rules_1.AddElementRule,
            rules_1.CardRule,
            rules_1.CaretValueRule,
            rules_1.ConceptRule,
            rules_1.ContainsRule,
            rules_1.AssignmentRule,
            rules_1.FlagRule,
            rules_1.MappingRule,
            rules_1.ObeysRule,
            rules_1.OnlyRule,
            rules_1.ValueSetComponentRule,
            rules_1.PathRule,
            rules_1.BindingRule
        ]
    ],
    [
        'Logical',
        [
            rules_1.AddElementRule,
            rules_1.CardRule,
            rules_1.CaretValueRule,
            // NO ContainsRule!
            rules_1.AssignmentRule,
            rules_1.FlagRule,
            rules_1.ObeysRule,
            rules_1.OnlyRule,
            rules_1.BindingRule
        ]
    ],
    [
        'Resource',
        [
            rules_1.AddElementRule,
            rules_1.CardRule,
            rules_1.CaretValueRule,
            // NO ContainsRule!
            rules_1.AssignmentRule,
            rules_1.FlagRule,
            rules_1.ObeysRule,
            rules_1.OnlyRule,
            rules_1.BindingRule
        ]
    ]
]);
/**
 * Checks if a rule is allowed. In this context "allowed" means allowed to be exported, so an
 * InsertRule is not allowed anywhere, because you can't actually export an InsertRule, you must expand
 * it into its list of rules, and then export those rules.
 * @param fshDefinition
 * @param rule
 * @returns - true if rule is allowed on fshDefinition, false otherwise
 */
function isAllowedRule(fshDefinition, rule) {
    var _a;
    return (_a = allowedRulesMap.get(fshDefinition.constructorName)) === null || _a === void 0 ? void 0 : _a.some(r => rule instanceof r);
}
//# sourceMappingURL=AllowedRules.js.map