<!-- -*- coding: utf-8-unix -*-)-->

# <a href="#FHIR-JPへの提案" name="FHIR-JPへの提案">FHIR-JPへの提案 ◆</a>


## <a href="#1." name="1.">1. ◆</a>リソースのURL型エレメントのURLエンコードに関する提案

リソースが持つURL値でURLエンコードした値を保持する場合のフォーマットを
FHIR-JPとして統一することを提案します。

[ガイドライン案](url.md#4.)



## <a href="#2." name="2.">2. ◆</a>リソースIDのOID化に関する提案

複数のサーバ間でリソースを共有したりコピーしたりする場合に、
リソースのLogical IDの衝突を避ける方法をFHIR-JPとして標準化することを提案します。

具体的にはFHIR仕様にある[OIDを使う方法](https://hl7.org/fhir/r4/datatypes.html#:~:text=This%20might%20be%20an,that%20meets%20these%20constraints)の採用です。

[OIDの利用](logicalid.md#4.1.3.)

```
<リソースLogical ID> ≡
<医療機関のOID>.<デバイス種別：FHIR>.<サーバ番号>.<FHIRサーバが付与するリソースID>
```
といったフォーマットを定めることで、リソースIDをグローバルにユニークなものとできます。


* FHIRサーバ内ではローカルなリソースIDで運用し、外部とのデータ交換時にOIDへ変換するといった使い方もあり得ます。

* FHIRサーバ内ではローカルなリソースはローカルIDのみで運用し、外部由来のリソースにはOIDを採用するという方法もあり得ます。このときにはエクスポートするリソースが含むローカルなリソースID（id値と内部リソースへのリファレンス）には自サーバのOIDを付加します。


【参考】

* [ＪＡＨＩＳ IHE-ITI を用いた 医療情報連携基盤実装ガイド](https://www.jahis.jp/files/user/04_JAHIS%20standard/13-104_JAHIS%20IHE-ITI%E3%82%92%E7%94%A8%E3%81%84%E3%81%9F%E5%8C%BB%E7%99%82%E6%83%85%E5%A0%B1%E9%80%A3%E6%90%BA%E5%9F%BA%E7%9B%A4%E5%AE%9F%E8%A3%85%E3%82%AC%E3%82%A4%E3%83%89%E6%9C%AC%E7%B7%A8Ver.1.0.pdf)の「8. オブジェクト識別子（OID）定義」

【課題】

* 情報漏洩時にOIDからリソースの由来を特定できてしまうリスクがある。




